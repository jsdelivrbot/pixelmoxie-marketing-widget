function onloadCSS(a,b){function c(){!d&&b&&(d=!0,b.call(a))}var d;a.addEventListener&&a.addEventListener("load",c),a.attachEvent&&a.attachEvent("onload",c),"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(c)}(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null!=a?null==b||c?a[0]:s.initial(a,a.length-b):void 0},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null!=a?null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b)):void 0},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}).call(this),function(a){var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){b.Backbone=a(b,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,exports,d,c)}else b.Backbone=a(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(function(a,Backbone,b,c){var d=a.Backbone,e=Array.prototype.slice;Backbone.VERSION="1.3.3",Backbone.$=c,Backbone.noConflict=function(){return a.Backbone=d,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var f=function(a,c,d){switch(a){case 1:return function(){return b[c](this[d])};case 2:return function(a){return b[c](this[d],a)};case 3:return function(a,e){return b[c](this[d],h(a,this),e)};case 4:return function(a,e,f){return b[c](this[d],h(a,this),e,f)};default:return function(){var a=e.call(arguments);return a.unshift(this[d]),b[c].apply(b,a)}}},g=function(a,c,d){b.each(c,function(c,e){b[e]&&(a.prototype[e]=f(c,e,d))})},h=function(a,c){return b.isFunction(a)?a:b.isObject(a)&&!c._isModel(a)?i(a):b.isString(a)?function(b){return b.get(a)}:a},i=function(a){var c=b.matches(a);return function(a){return c(a.attributes)}},j=Backbone.Events={},k=/\s+/,l=function(a,c,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=b.keys(d);h<g.length;h++)c=l(a,c,g[h],d[g[h]],f)}else if(d&&k.test(d))for(g=d.split(k);h<g.length;h++)c=a(c,g[h],e,f);else c=a(c,d,e,f);return c};j.on=function(a,b,c){return m(this,a,b,c)};var m=function(a,b,c,d,e){if(a._events=l(n,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};j.listenTo=function(a,c,d){if(!a)return this;var e=a._listenId||(a._listenId=b.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=b.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return m(a,c,d,this,g),this};var n=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};j.off=function(a,b,c){return this._events?(this._events=l(o,this._events,a,b,{context:c,listeners:this._listeners}),this):this},j.stopListening=function(a,c,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:b.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(c,d,this)}return this};var o=function(a,c,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(c||d||h){for(var j=c?[c]:b.keys(a);g<j.length;g++){c=j[g];var k=a[c];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[c]=l:delete a[c]}return a}for(var o=b.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};j.once=function(a,c,d){var e=l(p,{},a,c,b.bind(this.off,this));return"string"==typeof a&&null==d&&(c=void 0),this.on(e,c,d)},j.listenToOnce=function(a,c,d){var e=l(p,{},c,d,b.bind(this.stopListening,this,a));return this.listenTo(a,e)};var p=function(a,c,d,e){if(d){var f=a[c]=b.once(function(){e(c,f),d.apply(this,arguments)});f._callback=d}return a};j.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return l(q,this._events,a,void 0,c),this};var q=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&r(e,d),f&&r(f,[b].concat(d))}return a},r=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};j.bind=j.on,j.unbind=j.off,b.extend(Backbone,j);var s=Backbone.Model=function(a,c){var d=a||{};c||(c={}),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},c.collection&&(this.collection=c.collection),c.parse&&(d=this.parse(d,c)||{});var e=b.result(this,"defaults");d=b.defaults(b.extend({},e,d),e),this.set(d,c),this.changed={},this.initialize.apply(this,arguments)};b.extend(s.prototype,j,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return b.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return b.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!b.iteratee(a,this)(this.attributes)},set:function(a,c,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=c):(e={})[a]=c,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=b.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)c=e[m],b.isEqual(j[m],c)||h.push(m),b.isEqual(l[m],c)?delete k[m]:k[m]=c,f?delete j[m]:j[m]=c;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,c){return this.set(a,void 0,b.extend({},c,{unset:!0}))},clear:function(a){var c={};for(var d in this.attributes)c[d]=void 0;return this.set(c,b.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!b.isEmpty(this.changed):b.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?b.clone(this.changed):!1;var c=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];b.isEqual(c[e],f)||(d[e]=f)}return b.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(a){a=b.extend({parse:!0},a);var c=this,d=a.success;return a.success=function(b){var e=a.parse?c.parse(b,a):b;return c.set(e,a)?(d&&d.call(a.context,c,b,a),void c.trigger("sync",c,b,a)):!1},O(this,a),this.sync("read",this,a)},save:function(a,c,d){var e;null==a||"object"==typeof a?(e=a,d=c):(e={})[a]=c,d=b.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var c=d.parse?g.parse(a,d):a;return f&&(c=b.extend({},e,c)),c&&!g.set(c,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},O(this,d),e&&f&&(this.attributes=b.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?b.clone(a):{};var c=this,d=a.success,e=a.wait,f=function(){c.stopListening(),c.trigger("destroy",c,c.collection,a)};a.success=function(b){e&&f(),d&&d.call(a.context,c,b,a),c.isNew()||c.trigger("sync",c,b,a)};var g=!1;return this.isNew()?b.defer(a.success):(O(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=b.result(this,"urlRoot")||b.result(this.collection,"url")||N();if(this.isNew())return a;var c=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(c)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},b.extend({},a,{validate:!0}))},_validate:function(a,c){if(!c.validate||!this.validate)return!0;a=b.extend({},this.attributes,a);var d=this.validationError=this.validate(a,c)||null;return d?(this.trigger("invalid",this,d,b.extend(c,{validationError:d})),!1):!0}});var t={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};g(s,t,"attributes");var u=Backbone.Collection=function(a,c){c||(c={}),c.model&&(this.model=c.model),void 0!==c.comparator&&(this.comparator=c.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,b.extend({silent:!0},c))},v={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},x=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;f>d;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};b.extend(u.prototype,j,{model:s,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(a,c){return this.set(a,b.extend({merge:!1},c,w))},remove:function(a,c){c=b.extend({},c);var d=!b.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,c);return!c.silent&&e.length&&(c.changes={added:[],merged:[],removed:e},this.trigger("update",this,c)),d?e[0]:e},set:function(a,c){if(null!=a){c=b.extend({},v,c),c.parse&&!this._isModel(a)&&(a=this.parse(a,c)||[]);var d=!b.isArray(a);a=d?[a]:a.slice();var e=c.at;null!=e&&(e=+e),e>this.length&&(e=this.length),0>e&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=c.add,n=c.merge,o=c.remove,p=!1,q=this.comparator&&null==e&&c.sort!==!1,r=b.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var t=this._isModel(f)?f.attributes:f;c.parse&&(t=s.parse(t,c)),s.set(t,c),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,c),f&&(i.push(f),this._addReference(f,c),l[f.cid]=!0,h.push(f)))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,c)}var u=!1,w=!q&&m&&o;if(h.length&&w?(u=this.length!==h.length||b.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,x(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),x(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!c.silent){for(g=0;g<i.length;g++)null!=e&&(c.index=e+g),f=i[g],f.trigger("add",f,this,c);(p||u)&&this.trigger("sort",this,c),(i.length||k.length||j.length)&&(c.changes={added:i,removed:k,merged:j},this.trigger("update",this,c))}return d?a[0]:a}},reset:function(a,c){c=c?b.clone(c):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],c);return c.previousModels=this.models,this._reset(),a=this.add(a,b.extend({silent:!0},c)),c.silent||this.trigger("reset",this,c),a},push:function(a,c){return this.add(a,b.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,c){return this.add(a,b.extend({at:0},c))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return e.apply(this.models,arguments)},get:function(a){return null!=a?this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]:void 0},has:function(a){return null!=this.get(a)},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var c=this.comparator;if(!c)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=c.length;return b.isFunction(c)&&(c=b.bind(c,this)),1===d||b.isString(c)?this.models=this.sortBy(c):this.models.sort(c),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=b.extend({parse:!0},a);var c=a.success,d=this;return a.success=function(b){var e=a.reset?"reset":"set";d[e](b,a),c&&c.call(a.context,d,b,a),d.trigger("sync",d,b,a)},O(this,a),this.sync("read",this,a)},create:function(a,c){c=c?b.clone(c):{};var d=c.wait;if(a=this._prepareModel(a,c),!a)return!1;d||this.add(a,c);var e=this,f=c.success;return c.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,c),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,c){if(this._isModel(a))return a.collection||(a.collection=this),a;c=c?b.clone(c):{},c.collection=this;var d=new this.model(a,c);return d.validationError?(this.trigger("invalid",this,d.validationError,c),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof s},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var y={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};g(u,y,"models");var z=Backbone.View=function(a){this.cid=b.uniqueId("view"),b.extend(this,b.pick(a,B)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,B=["model","collection","el","id","attributes","className","tagName","events"];b.extend(z.prototype,j,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof Backbone.$?a:Backbone.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=b.result(this,"events")),!a)return this;this.undelegateEvents();for(var c in a){var d=a[c];if(b.isFunction(d)||(d=this[d]),d){var e=c.match(A);this.delegate(e[1],e[2],b.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var a=b.extend({},b.result(this,"attributes"));this.id&&(a.id=b.result(this,"id")),this.className&&(a["class"]=b.result(this,"className")),
this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),Backbone.sync=function(a,c,d){var e=C[a];b.defaults(d||(d={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=b.result(c,"url")||N()),null!=d.data||!c||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1);var h=d.error;d.error=function(a,b,c){d.textStatus=b,d.errorThrown=c,h&&h.call(d.context,a,b,c)};var i=d.xhr=Backbone.ajax(b.extend(f,d));return c.trigger("request",c,i,d),i};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var D=Backbone.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,G=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(D.prototype,j,{initialize:function(){},route:function(a,c,d){b.isRegExp(a)||(a=this._routeToRegExp(a)),b.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return Backbone.history.route(a,function(b){var f=e._extractParameters(a,b);e.execute(d,f,c)!==!1&&(e.trigger.apply(e,["route:"+c].concat(f)),e.trigger("route",c,f),Backbone.history.trigger("route",e,c,f))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,b){return Backbone.history.navigate(a,b),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var a,c=b.keys(this.routes);null!=(a=c.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(H,"\\$&").replace(E,"(?:$1)?").replace(F,function(a,b){return b?a:"([^/?]+)"}).replace(G,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return b.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var I=Backbone.History=function(){this.handlers=[],this.checkUrl=b.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},J=/^[#\/]|\s+$/g,K=/^\/+|\/+$/g,L=/#.*$/;I.started=!1,b.extend(I.prototype,j,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(J,"")},start:function(a){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=b.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(K,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var c=this.root.slice(0,-1)||"/";return this.location.replace(c+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),b.some(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!I.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;""!==a&&"?"!==a.charAt(0)||(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(L,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),Backbone.history=new I;var M=function(a,c){var d,e=this;return d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c),d.prototype=b.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};s.extend=u.extend=D.extend=z.extend=I.extend=M;var N=function(){throw new Error('A "url" property or function must be specified')},O=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return Backbone}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){function b(a){if(a in l.style)return a;for(var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1),d=0;d<b.length;++d){var e=b[d]+c;if(e in l.style)return e}}function c(){return l.style[m.transform]="",l.style[m.transform]="rotateY(90deg)",""!==l.style[m.transform]}function d(a){return"string"==typeof a&&this.parse(a),this}function e(a,b,c){b===!0?a.queue(c):b?a.queue(b,c):a.each(function(){c.call(this)})}function f(b){var c=[];return a.each(b,function(b){b=a.camelCase(b),b=a.transit.propertyMap[b]||a.cssProps[b]||b,b=i(b),m[b]&&(b=i(m[b])),-1===a.inArray(b,c)&&c.push(b)}),c}function g(b,c,d,e){var g=f(b);a.cssEase[d]&&(d=a.cssEase[d]);var h=""+k(c)+" "+d;parseInt(e,10)>0&&(h+=" "+k(e));var i=[];return a.each(g,function(a,b){i.push(b+" "+h)}),i.join(", ")}function h(b,c){c||(a.cssNumber[b]=!0),a.transit.propertyMap[b]=m.transform,a.cssHooks[b]={get:function(c){var d=a(c).css("transit:transform");return d.get(b)},set:function(c,d){var e=a(c).css("transit:transform");e.setFromString(b,d),a(c).css({"transit:transform":e})}}}function i(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function j(a,b){return"string"!=typeof a||a.match(/^[\-0-9\.]+$/)?""+a+b:a}function k(b){var c=b;return"string"!=typeof c||c.match(/^[\-0-9\.]+/)||(c=a.fx.speeds[c]||a.fx.speeds._default),j(c,"ms")}a.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),m={},n=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;m.transition=b("transition"),m.transitionDelay=b("transitionDelay"),m.transform=b("transform"),m.transformOrigin=b("transformOrigin"),m.filter=b("Filter"),m.transform3d=c();var o={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},p=m.transitionEnd=o[m.transition]||null;for(var q in m)m.hasOwnProperty(q)&&"undefined"==typeof a.support[q]&&(a.support[q]=m[q]);return l=null,a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},a.cssHooks["transit:transform"]={get:function(b){return a(b).data("transform")||new d},set:function(b,c){var e=c;e instanceof d||(e=new d(e)),"WebkitTransform"!==m.transform||n?b.style[m.transform]=e.toString():b.style[m.transform]=e.toString(!0),a(b).data("transform",e)}},a.cssHooks.transform={set:a.cssHooks["transit:transform"].set},a.cssHooks.filter={get:function(a){return a.style[m.filter]},set:function(a,b){a.style[m.filter]=b}},a.fn.jquery<"1.8"&&(a.cssHooks.transformOrigin={get:function(a){return a.style[m.transformOrigin]},set:function(a,b){a.style[m.transformOrigin]=b}},a.cssHooks.transition={get:function(a){return a.style[m.transition]},set:function(a,b){a.style[m.transition]=b}}),h("scale"),h("scaleX"),h("scaleY"),h("translate"),h("rotate"),h("rotateX"),h("rotateY"),h("rotate3d"),h("perspective"),h("skewX"),h("skewY"),h("x",!0),h("y",!0),d.prototype={setFromString:function(a,b){var c="string"==typeof b?b.split(","):b.constructor===Array?b:[b];c.unshift(a),d.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=j(a,"deg")},rotateX:function(a){this.rotateX=j(a,"deg")},rotateY:function(a){this.rotateY=j(a,"deg")},scale:function(a,b){void 0===b&&(b=a),this.scale=a+","+b},skewX:function(a){this.skewX=j(a,"deg")},skewY:function(a){this.skewY=j(a,"deg")},perspective:function(a){this.perspective=j(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,b){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==a&&void 0!==a&&(this._translateX=j(a,"px")),null!==b&&void 0!==b&&(this._translateY=j(b,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");return a[0]&&(a[0]=parseFloat(a[0])),a[1]&&(a[1]=parseFloat(a[1])),a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),b=0;3>=b;++b)a[b]&&(a[b]=parseFloat(a[b]));return a[3]&&(a[3]=j(a[3],"deg")),a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this)if(this.hasOwnProperty(c)){if(!m.transform3d&&("rotateX"===c||"rotateY"===c||"perspective"===c||"transformOrigin"===c))continue;"_"!==c[0]&&(a&&"scale"===c?b.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?b.push(c+"3d("+this[c]+",0)"):b.push(c+"("+this[c]+")"))}return b.join(" ")}},a.fn.transition=a.fn.transit=function(b,c,d,f){var h=this,i=0,j=!0,l=a.extend(!0,{},b);"function"==typeof c&&(f=c,c=void 0),"object"==typeof c&&(d=c.easing,i=c.delay||0,j="undefined"==typeof c.queue?!0:c.queue,f=c.complete,c=c.duration),"function"==typeof d&&(f=d,d=void 0),"undefined"!=typeof l.easing&&(d=l.easing,delete l.easing),"undefined"!=typeof l.duration&&(c=l.duration,delete l.duration),"undefined"!=typeof l.complete&&(f=l.complete,delete l.complete),"undefined"!=typeof l.queue&&(j=l.queue,delete l.queue),"undefined"!=typeof l.delay&&(i=l.delay,delete l.delay),"undefined"==typeof c&&(c=a.fx.speeds._default),"undefined"==typeof d&&(d=a.cssEase._default),c=k(c);var n=g(l,c,d,i),o=a.transit.enabled&&m.transition,q=o?parseInt(c,10)+parseInt(i,10):0;if(0===q){var r=function(a){h.css(l),f&&f.apply(h),a&&a()};return e(h,j,r),h}var s={},t=function(b){var c=!1,d=function(){c&&h.unbind(p,d),q>0&&h.each(function(){this.style[m.transition]=s[this]||null}),"function"==typeof f&&f.apply(h),"function"==typeof b&&b()};q>0&&p&&a.transit.useTransitionEnd?(c=!0,h.bind(p,d)):window.setTimeout(d,q),h.each(function(){q>0&&(this.style[m.transition]=n),a(this).css(l)})},u=function(a){this.offsetWidth,t(a)};return e(h,j,u),this},a.transit.getTransitionValue=g,a}),function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this),function(){window.PMXMW={},window.pmxmwUnderscore=_.noConflict(),window.pmxmwBackbone=Backbone.noConflict(),function(){var a,b,c,d,e;for(c=void 0,e=function(){},d=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],b=d.length,a=window.console=window.console||{};b--;)c=d[b],a[c]||(a[c]=e)}()}.call(this),function(){var a;a=function(){var a,b,c,d;return b={},d=function(a){return null==b[a]&&(b[a]=$(a)),b[a]},a=function(a){b[a]=void 0},c=function(a){return b[a]=void 0,d(a)},{get:d,clear:a,fresh:c}},window.selectors=new a}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;PMXMW.WidgetView=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.events={"click .pmxWidgetStrap-trigger":"showModal","click .pmxWidgetOverlay":"hideModal","click .pmxWidgetOverlay-close":"hideModal","click .pmxWidgetModal-trigger":"navigationTriggered","change input":"demoSettingTriggered"},c.prototype.initialize=function(){this.$window=selectors.get(window),this.$html=selectors.get("html"),this.$body=selectors.get("body"),this.useCSSTransforms=this.$html.hasClass("csstransforms"),this.useCSSTransforms3d=this.$html.hasClass("csstransforms3d"),this.baseURL=window.themeInfo.widgetBaseURL,this.dataURL=this.baseURL+"data.xml",this.cssURL=this.baseURL+"pmxmw.css",this.themeName=window.themeInfo.name,this.themeVersion=window.themeInfo.version,this.isLivePreview=window.location.href.indexOf("/customize/")>=0,this.isFreeTheme=this.$body.hasClass("pixelmoxie-free-theme"),this.showWidget=this.$body.hasClass("has-marketing-widget")},c.prototype.render=function(){var a,b;this.$body.hasClass("has-marketing-widget")||this.$body.addClass("has-marketing-widget"),a='SELECT features-title, support-title, settings-title, demo-settings-title, themes.theme from xml WHERE url="'+this.dataURL+'" and themes.theme.title="'+this.themeName+'"',b="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(a)+"&format=json&callback=?",$.ajax({url:b,dataType:"jsonp",type:"GET",cache:!0,success:function(a){return function(b,c){return b.error||void 0===b.query?void console.log("PMXMW: Error loading data."):void("success"!==c&&"notmodified"!==c||(a.data=b.query.results.data,a.timeInMs=Date.now(),a.loadCSS()))}}(this)})},c.prototype.loadCSS=function(){this.stylesheet=loadCSS(this.cssURL),onloadCSS(this.stylesheet,function(a){return function(){console.log("PMXMW: Stylesheet loaded in "+(Date.now()-a.timeInMs)+"ms."),a.buildWidget(a.data),a.setupView(),a.setupEvents(),a.$el.show(),pmxmwUnderscore.defer(function(){a.timeInMs=Date.now(),a.layout()})}}(this))},c.prototype.buildWidget=function(a){var b;b='<div class="pmxWidget" style="display:none;visibility:hidden;">\n  <div class="pmxWidgetModal">\n    <div class="pmxWidgetModal-contentWrap">\n      <header class="pmxWidgetModal-header">\n        <h1 class="pmxWidgetModal-themeName">'+a.themes.theme.title+'</h1>\n      </header>\n      <nav class="pmxWidgetModal-nav">\n        <ul class="pmxWidgetModal-tabs">\n          <li class="pmxWidgetModal-tab">\n            <a class="pmxWidgetModal-trigger isActive" href="#pmxw-features">'+a["features-title"]+'</a>\n          </li>\n          <li class="pmxWidgetModal-tab">\n            <a class="pmxWidgetModal-trigger" href="#pmxw-support">'+a["support-title"]+"</a>\n          </li>\n          "+(a.themes.theme.modal.settings?'<li class="pmxWidgetModal-tab">\n  <a class="pmxWidgetModal-trigger" href="#pmxw-settings">'+a["settings-title"]+"</a>\n</li>":void 0)+'\n        </ul>\n      </nav>\n      <div class="pmxWidgetModal-viewport">\n        <div class="pmxWidgetModal-content">\n          <div id="pmxw-features" class="pmxWidgetModal-section pmxWidgetModal-featuresSection isActive">\n            <div class="pmxWidgetModal-sectionBody pmxWidgetModal-rte">\n              '+a.themes.theme.modal.features.description+'\n            </div>\n          </div>\n          <div id="pmxw-support" class="pmxWidgetModal-section pmxWidgetModal-supportSection">\n            <div class="pmxWidgetModal-sectionBody pmxWidgetModal-rte">\n              '+a.themes.theme.modal.support.description+"\n            </div>\n          </div>\n          "+(a.themes.theme.modal.settings?'<div id="pmxw-settings" class="pmxWidgetModal-section pmxWidgetModal-settingsSection">\n  <div class="pmxWidgetModal-sectionBody pmxWidgetModal-rte">\n    '+a.themes.theme.modal.settings.description+'\n    <div class="pmxWidgetModal-controls"></div>\n  </div>\n</div>':void 0)+'\n        </div>\n      </div>\n      <footer class="pmxWidgetModal-footer">\n        <a href="http://pixelmoxie.net" target="_blank">\n          <span><svg xmlns="http://www.w3.org/2000/svg" width="56" height="40" viewBox="0 0 56 40"><path d="M52.6 3.4C50.3 1.1 47.3 0 44.4 0c-3 0-5.9 1.1-8.2 3.4L28 11.6l-8.2-8.2C17.6 1.1 14.6 0 11.6 0S5.7 1.1 3.4 3.4C1.1 5.7 0 8.6 0 11.6c0 3 1.1 5.9 3.4 8.2L20.6 37c4.1 4.1 10.7 4.1 14.7 0l17.2-17.2c2.2-2.2 3.3-5 3.4-7.9.1-3.1-1-6.2-3.3-8.5zM30.5 18.9c1.4 1.4 1.4 3.6 0 4.9-.6.7-1.5 1-2.5 1s-1.8-.4-2.5-1c-1.4-1.4-1.4-3.6 0-4.9l2.5-2.5 2.5 2.5zM50.1 5.8c3.2 3.2 3.2 8.3 0 11.5L32.9 34.5c-2.7 2.7-7.1 2.7-9.8 0L5.9 17.3C2.7 14.1 2.7 9 5.9 5.8c3.2-3.2 8.3-3.2 11.5 0l8.2 8.2-2.5 2.5c-1.3 1.3-2 3.1-2 4.9s.7 3.6 2 4.9c2.7 2.7 7.1 2.7 9.8 0 1.3-1.3 2-3.1 2-4.9 0-1.8-.7-3.6-2-4.9L30.5 14l8.2-8.2c3.1-3.1 8.2-3.1 11.4 0z"/></svg></span>\n          <span>Made by PixelMoxie</span>\n        </a>\n      </footer>\n      <div class="pmxWidgetOverlay-close">\n        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">\n          <path d="M26.1,12l-6,6l6,6L24,26.1l-6-6l-6,6L9.9,24l6-6l-6-6L12,9.9l6,6l6-6L26.1,12z"/>\n        </svg>\n      </div><!-- .pmxWidgetOverlay-close -->\n    </div><!-- .pmxWidgetModal-contentWrap -->\n  </div><!-- .pmxWidgetModal -->\n  <div class="pmxWidgetOverlay"></div><!-- .pmxWidgetOverlay -->\n    <div class="pmxWidgetStrap">\n      <div class="pmxWidgetStrap-segment pmxWidgetStrap-branding">\n        <a class="pmxWidgetStrap-logo" href="http://www.pixelmoxie.net" target="_blank">\n          <svg xmlns="http://www.w3.org/2000/svg" width="56" height="40" viewBox="0 0 56 40">\n            <path d="M52.6 3.4C50.3 1.1 47.3 0 44.4 0c-3 0-5.9 1.1-8.2 3.4L28 11.6l-8.2-8.2C17.6 1.1 14.6 0 11.6 0S5.7 1.1 3.4 3.4C1.1 5.7 0 8.6 0 11.6c0 3 1.1 5.9 3.4 8.2L20.6 37c4.1 4.1 10.7 4.1 14.7 0l17.2-17.2c2.2-2.2 3.3-5 3.4-7.9.1-3.1-1-6.2-3.3-8.5zM30.5 18.9c1.4 1.4 1.4 3.6 0 4.9-.6.7-1.5 1-2.5 1s-1.8-.4-2.5-1c-1.4-1.4-1.4-3.6 0-4.9l2.5-2.5 2.5 2.5zM50.1 5.8c3.2 3.2 3.2 8.3 0 11.5L32.9 34.5c-2.7 2.7-7.1 2.7-9.8 0L5.9 17.3C2.7 14.1 2.7 9 5.9 5.8c3.2-3.2 8.3-3.2 11.5 0l8.2 8.2-2.5 2.5c-1.3 1.3-2 3.1-2 4.9s.7 3.6 2 4.9c2.7 2.7 7.1 2.7 9.8 0 1.3-1.3 2-3.1 2-4.9 0-1.8-.7-3.6-2-4.9L30.5 14l8.2-8.2c3.1-3.1 8.2-3.1 11.4 0z"></path>\n          </svg>\n        </a>\n      </div>\n      <div class="pmxWidgetStrap-segment pmxWidgetStrap-title">\n        <h4 class="pmxWidgetStrap-themeName">'+a.themes.theme.title+'</h4>\n      </div>\n      <div class="pmxWidgetStrap-segment pmxWidgetStrap-actions">\n        <a class="pmxWidgetStrap-cta" href="javascript:;" target="_blank">Buy Now<span class="pmxWidgetStrap-cartIcon"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12"><path d="M4 1c-.1-.6-.6-1-1.2-1H1C.5 0 0 .4 0 1s.4 1 1 1h1l.8 4.2c.1.5.6.8 1 .8h7.4c.5 0 .9-.3 1-.8l.8-4c.1-.3 0-.6-.2-.8-.2-.3-.5-.4-.8-.4H4z"></path><circle cx="10.5" cy="10.5" r="1.5"></circle><circle cx="4.5" cy="10.5" r="1.5"></circle></svg></span></a>\n      </div>\n      <div class="pmxWidgetStrap-segment pmxWidgetStrap-nav">\n        <ul class="pmxWidgetStrap-menu">\n          <li class="pmxWidgetStrap-menuItem">\n            <a class="pmxWidgetStrap-trigger" href="#pmx-features">'+a["features-title"]+'</a>\n          </li>\n          <li class="pmxWidgetStrap-menuItem">\n            <a class="pmxWidgetStrap-trigger" href="#pmx-support">'+a["support-title"]+"</a>\n          </li>\n          "+(a.themes.theme.modal.settings?'<li class="pmxWidgetStrap-menuItem" data-pmw-balloon="'+a["demo-settings-title"]+'" data-pmw-balloon-pos="right-edge">\n  <a class="pmxWidgetStrap-trigger pmxWidgetStrap-trigger--settings" href="#pmx-settings">\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n      <path d="M15 4h-2c-.6 0-1 .4-1 1s.4 1 1 1h2c.6 0 1-.4 1-1s-.4-1-1-1zm-6 6H7c-.6 0-1 .4-1 1s.4 1 1 1h2c.6 0 1-.4 1-1s-.4-1-1-1zM3 6H1c-.6 0-1 .4-1 1s.4 1 1 1h2c.6 0 1-.4 1-1s-.4-1-1-1zm11 1c-.6 0-1 .4-1 1v7c0 .6.4 1 1 1s1-.4 1-1V8c0-.6-.4-1-1-1zm0-4c.6 0 1-.4 1-1V1c0-.6-.4-1-1-1s-1 .4-1 1v1c0 .6.4 1 1 1zM8 9c.6 0 1-.4 1-1V1c0-.6-.4-1-1-1S7 .4 7 1v7c0 .6.4 1 1 1zm0 4c-.6 0-1 .4-1 1v1c0 .6.4 1 1 1s1-.4 1-1v-1c0-.6-.4-1-1-1zM2 9c-.6 0-1 .4-1 1v5c0 .6.4 1 1 1s1-.4 1-1v-5c0-.6-.4-1-1-1zm0-4c.6 0 1-.4 1-1V1c0-.6-.4-1-1-1S1 .4 1 1v3c0 .6.4 1 1 1z"></path>\n    </svg>\n  </a>\n</li>':void 0)+"\n        </ul>\n      </div>\n    </div><!-- .pmxWidgetStrap -->\n</div><!-- .pmxWidget -->",this.$body.append(b),pmxmwUnderscore.defer(function(b){return function(){sessionStorage.getItem("pmx-settings-clicked")||b.$(".pmxWidgetStrap-trigger--settings").addClass("ripple"),b.buildSettingsControls(a.themes.theme.modal.settings.controls)}}(this))},c.prototype.buildSettingsControls=function(a){var b;b="",pmxmwUnderscore.each(a,function(a){return function(c,d){"group"===d?pmxmwUnderscore.isArray(c)?pmxmwUnderscore.each(c,function(c,d){b+=a.getControlGroup(c)}):b+=a.getControlGroup(c):"control"===d&&pmxmwUnderscore.each(c,function(c,d){b+=a.getControl(c)})}}(this)),pmxmwUnderscore.defer(function(a){return function(){a.$(".pmxWidgetModal-controls").html(b)}}(this))},c.prototype.getControlGroup=function(a){var b;return b="",b+='<div class="pmxWidgetModal-controlGroup">\n',a.title&&(b+='<h3 class="pmxWidgetModal-controlGroupTitle">'+a.title+"</h3>\n"),pmxmwUnderscore.each(a.control,function(a){return function(c){b+=a.getControl(c)}}(this)),b+="</div>\n"},c.prototype.getControl=function(a){var b;if("checkbox"===a.type)b='<div class="pmxWidgetModal-controlWrap">\n  <label class="pmxWidgetModal-control pmxWidgetModal-switch">'+a.content+'\n    <input type="checkbox" id="'+a.name+'"'+(a.checked?' checked="checked"':"")+'/>\n    <div class="pmxWidgetModal-controlIndicator"><small></small></div>\n  </label>\n\n</div>\n';else if("radio"===a.type)b='<div class="pmxWidgetModal-controlWrap">\n  <label class="pmxWidgetModal-control pmxWidgetModal-radio">'+a.content+'\n    <input type="radio" id="'+a.id+'" name="'+a.name+'"'+(a.checked?' checked="checked"':"")+'/>\n    <div class="pmxWidgetModal-controlIndicator"><small></small></div>\n  </label>\n</div>\n';else{if("swatch"!==a.type)return"";b='<div class="pmxWidgetModal-controlWrap pmxWidgetModal-swatchWrap">\n  <label class="pmxWidgetModal-control pmxWidgetModal-swatch">\n    <input type="radio" id="'+a.id+'" name="'+a.name+'"'+(a.checked?' checked="checked"':"")+'/>\n    <div class="pmxWidgetModal-controlIndicator" style="background-color: '+a.content+';"><small>'+a.content+"</small></div>\n  </label>\n</div>\n"}return b},c.prototype.setupView=function(){this.setElement(selectors.get(".pmxWidget").last()),this.$overlay=this.$(".pmxWidgetOverlay"),this.$tabs=this.$(".pmxWidgetModal-trigger"),this.$viewport=this.$(".pmxWidgetModal-viewport"),this.$content=this.$(".pmxWidgetModal-content"),this.$panels=this.$(".pmxWidgetModal-section"),this.totalPanels=this.$panels.length},c.prototype.isWidgetReady=function(){var a;return window.getComputedStyle?(a=window.getComputedStyle(document.querySelector(".pmxWidget"),"::before").getPropertyValue("content"),a=a.replace(/'/g,"").replace(/"/g,""),"ready"===a):!1},c.prototype.layout=function(){return this.isWidgetReady()?(this.cssLoaded||(clearTimeout(this.layoutTimeout),this.cssLoaded=!0,this.$el.css("visibility","visible"),console.log("PMXMW: Styles applied in "+(Date.now()-this.timeInMs)+"ms.")),this.$viewport.removeAttr("style"),this.viewportWidth=this.$viewport.outerWidth(),this.viewportHeight=this.$viewport.outerHeight(),this.$content.removeAttr("style").css({position:"absolute",top:0,left:0,width:this.viewportWidth*this.totalPanels,height:this.viewportHeight}),pmxmwUnderscore.each(this.$panels,function(a){return function(b,c){var d;d=$(b).removeAttr("style"),d.css({position:"absolute",top:0,left:a.viewportWidth*c,width:a.viewportWidth,height:a.viewportHeight})}}(this)),void console.log("PMXMW: Viewport size is "+this.viewportWidth+"x"+this.viewportHeight)):void(this.layoutTimeout=setTimeout(function(a){return function(){a.layout()}}(this),10))},c.prototype.showModal=function(a){var b,c,d;a.preventDefault(),b=$(a.target),d=b.parent().index(),b.hasClass("ripple")&&(b.removeClass("ripple"),c=b.attr("href").replace(/[^a-zA-Z 0-9\-]/,"")+"-clicked",sessionStorage.setItem(c,!0)),d>=0&&this.activeIndex!==d&&(this.activeIndex=d,this.navigateTo(this.activeIndex,!0)),this.$el.addClass("showModal"),this.$body.addClass("show-marketing-modal")},c.prototype.hideModal=function(){this.$el.removeClass("showModal"),this.$body.removeClass("show-marketing-modal")},c.prototype.hideStrap=function(){this.$el.hasClass("hideStrap")||this.$el.addClass("hideStrap")},c.prototype.showStrap=function(){this.$el.hasClass("hideStrap")&&this.$el.removeClass("hideStrap")},c.prototype.navigationTriggered=function(a){var b,c;a.preventDefault(),b=$(a.target),c=b.parent().index(),c>=0&&this.activeIndex!==c&&(this.activeIndex=c,this.navigateTo(this.activeIndex))},c.prototype.navigateTo=function(a,b){var c;null==b&&(b=!1),this.$tabs.removeClass("isActive").eq(a).addClass("isActive"),this.$panels.removeClass("isActive").eq(a).addClass("isActive"),c=this.viewportWidth*a*-1,b?this.$content.css({x:c}):this.$content.transition({x:c},500,"cubic-bezier(0.075, 0.820, 0.165, 1.000)")},c.prototype.demoSettingTriggered=function(a){var b,c;b=String(a.target.name||a.target.id).toLowerCase().replace(/ /g,"_"),c="checkbox"===a.target.type?a.target.checked:String(a.target.id).toLowerCase(),this.$el.trigger("pmxmw:"+b,[c])},c.prototype.setupEvents=function(){this.$window.on("resize orientationchange",pmxmwUnderscore.debounce(function(a){return function(){a.layout(),a.navigateTo(a.activeIndex,!0)}}(this),150))},c}(pmxmwBackbone.View)}.call(this),function(){$(function(){window.pmxmw=new PMXMW.WidgetView,window.pmxmw.render()})}.call(this);